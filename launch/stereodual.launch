<launch>

    <node pkg="feature_frontend" type="stereoPreprocess" name="process" >
        <param name="is_image_show" type="bool" value="false"/>
        <param name="down_sample_scale" type="double" value="1.0"/>
        <remap from="/stereo/left/image_raw" to="/pg_17221110/image_raw"/>
        <remap from="/stereo/right/image_raw" to="/pg_17221121/image_raw"/>
        <remap from="/stereo/left/image" to="/pg_17221110/image"/>
        <remap from="/stereo/right/image" to="/pg_17221121/image"/>
    </node>

    <node pkg="fisheye_model" type="dualfisheye_node" name="fisheyeUp" >
        <remap from="~up_image_raw" to="/pg_17221110/image_raw"/>
        <remap from="~down_image_raw" to="/pg_17221121/image_raw"/>

        <param name="up_camera_model_file" type="string" value="$(find vins_so)/../config/sdual/cam_up_camera_calib.yaml"/>
        <param name="up_vignetting_model_file" type="string" value="$(find vins_so)/../config/sdual/up_vignetting_model_calib.yaml"/>

        <param name="down_camera_model_file" type="string" value="$(find vins_so)/../config/sdual/cam_down_camera_calib.yaml"/>
        <param name="down_vignetting_model_file" type="string" value="$(find vins_so)/../config/sdual/down_vignetting_model_calib.yaml"/>

        <param name="up_cropper_file" type="string" value="$(find fisheye_model)/config/fisheyeUp.yaml"/>
        <param name="down_cropper_file" type="string" value="$(find fisheye_model)/config/fisheyeUp.yaml"/>

        <param name="is_image_show" type="bool" value="false"/>
        <param name="camera_num" type="int" value="4"/>
        <rosparam>
            imgFInfo:           /camera_info
            # individual setting for camera 0
            camera0: #L
                pub_image:      /image/L
                max_image_size: 315
                angle_row:      65.0
                angle_col:      90.0
                rate:           10
            camera1: #F
                pub_image:      /image/F
                max_image_size: 409
                angle_row:      65.0
                angle_col:      90.0
                rate:           10
            camera2: #R
                pub_image:      /image/R
                max_image_size: 315
                angle_row:      65.0
                angle_col:      90.0
                rate:           10
            camera3: #B
                pub_image:      /image/B
                max_image_size: 315
                angle_row:      65.0
                angle_col:      90.0
                rate:           10
        </rosparam>
    </node>

<!--<node pkg="feature_frontend" type="stereocam_node" name="feature" output="screen">
    <param name="camera_num_stereo" type="int" value="1"/>
    <rosparam subst_value="True">
        camera0:
            image_topic_left:       /image/L
            image_topic_right:      /image/L
            cam_config_file_left:   /home/gao/ws/src/vins/config/sdual/vins/cam_config_L.yaml
            cam_config_file_right:  /home/gao/ws/src/vins/config/sdual/vins/cam_config_L2.yaml
            error_config_left:      /home/gao/ws/src/vins/feature_frontend/data/L_cam
            error_config_right:     /home/gao/ws/src/vins/feature_frontend/data/L_cam
            feature_config_file:    /home/gao/ws/src/vins/config/sdual/vins/feature_config.yaml
     </rosparam>
</node>-->

<node pkg="feature_frontend" type="multistereofeaturenode" name="feature"  >
  <param name="camera_num_stereo" type="int" value="4"/>
  <rosparam>
      camera0:
          image_topic:            /image/L
          cam_config_file_left:   /home/gao/ws/src/vins/config/sdual/vins/cam_config_L.yaml
          cam_config_file_right:  /home/gao/ws/src/vins/config/sdual/vins/cam_config_L2.yaml
          error_config_left:      /home/gao/ws/src/vins/feature_frontend/data/L_cam
          error_config_right:     /home/gao/ws/src/vins/feature_frontend/data/L_cam
          feature_config_file:    /home/gao/ws/src/vins/config/sdual/vins/feature_config.yaml
      camera1:
          image_topic:            /image/F
          cam_config_file_left:   /home/gao/ws/src/vins/config/sdual/vins/cam_config_F.yaml
          cam_config_file_right:  /home/gao/ws/src/vins/config/sdual/vins/cam_config_F2.yaml
          error_config_left:      /home/gao/ws/src/vins/feature_frontend/data/F_cam
          error_config_right:     /home/gao/ws/src/vins/feature_frontend/data/F_cam
          feature_config_file:    /home/gao/ws/src/vins/config/sdual/vins/feature_config.yaml
      camera2:
          image_topic:            /image/R
          cam_config_file_left:   /home/gao/ws/src/vins/config/sdual/vins/cam_config_R.yaml
          cam_config_file_right:  /home/gao/ws/src/vins/config/sdual/vins/cam_config_R2.yaml
          error_config_left:      /home/gao/ws/src/vins/feature_frontend/data/R_cam
          error_config_right:     /home/gao/ws/src/vins/feature_frontend/data/R_cam
          feature_config_file:    /home/gao/ws/src/vins/config/sdual/vins/feature_config.yaml
      camera3:
         image_topic:            /image/B
         cam_config_file_left:   /home/gao/ws/src/vins/config/sdual/vins/cam_config_B.yaml
         cam_config_file_right:  /home/gao/ws/src/vins/config/sdual/vins/cam_config_B2.yaml
         error_config_left:      /home/gao/ws/src/vins/feature_frontend/data/B_cam
         error_config_right:     /home/gao/ws/src/vins/feature_frontend/data/B_cam
         feature_config_file:    /home/gao/ws/src/vins/config/sdual/vins/feature_config.yaml
  </rosparam>
</node>

<node ns = "vins" name="vins" pkg="vins_so" type="vins_so" output="screen">
    <param name="vins_folder" type="string" value="/home/gao/ws/src/vins/" />
    <param name="num_of_cam" type="int" value="8" />
    <param name="camera_num_stereo" type="int" value="4"/>
    <rosparam subst_value="True">
        vins_config_file:          /home/gao/ws/src/vins/config/sdual/vins/vins_config.yaml
        # individual setting for camera 0
        # L
        camera0:
            cam_config_file:        /home/gao/ws/src/vins/config/sdual/vins/cam_config_L.yaml
        camera1:
            cam_config_file:        /home/gao/ws/src/vins/config/sdual/vins/cam_config_L2.yaml
        # F
        camera2:
            cam_config_file:        /home/gao/ws/src/vins/config/sdual/vins/cam_config_F.yaml
        camera3:
            cam_config_file:        /home/gao/ws/src/vins/config/sdual/vins/cam_config_F2.yaml
        # R
        camera4:
            cam_config_file:        /home/gao/ws/src/vins/config/sdual/vins/cam_config_R.yaml
        camera5:
            cam_config_file:        /home/gao/ws/src/vins/config/sdual/vins/cam_config_R2.yaml
        # B
        camera6:
            cam_config_file:        /home/gao/ws/src/vins/config/sdual/vins/cam_config_B.yaml
        camera7:
            cam_config_file:        /home/gao/ws/src/vins/config/sdual/vins/cam_config_B2.yaml
    </rosparam>
</node>

</launch>
